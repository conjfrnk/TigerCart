<!-- templates/shopper_timeline.html -->

{% extends "base.html" %}
{% block title %}Order Timeline{% endblock %}
{% block content %}
<h1>Your Order Timeline</h1>
<div id="timeline">
    <p>Status: {{ order['timeline'] }}</p>
</div>
<script>
    function refreshTimeline() {
        fetch("{{ url_for('order_status', order_id=order['id']) }}")
            .then(response => response.json())
            .then(data => {
                // Update the timeline content
                document.getElementById("timeline").innerHTML = "Status: " + JSON.stringify(data.timeline);
            })
            .catch(error => console.error("Error fetching order status:", error));
    }
    // Refresh the timeline every 10 seconds
    setInterval(refreshTimeline, 10000);
    // Initial call to display current status
    refreshTimeline();
</script>
{% endblock %}
